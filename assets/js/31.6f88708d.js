(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{161:function(t,s,n){"use strict";n.r(s);var a=n(0),o=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"gin-笔记"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gin-笔记","aria-hidden":"true"}},[t._v("#")]),t._v(" Gin 笔记")]),n("h2",{attrs:{id:"快速开始"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#快速开始","aria-hidden":"true"}},[t._v("#")]),t._v(" 快速开始")]),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("# 假定以下代码在 example.go 文件\ncat example.go\n")])])]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"github.com/gin-gonic/gin"')]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tr "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("GET")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/ping"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("JSON")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("200")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("H"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{attrs:{class:"token string"}},[t._v('"message"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"pong"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// listen and serve on 0.0.0.0:8080")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("示例")]),n("h3",{attrs:{id:"使用-get-post-put-patch-delete-和-options-方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-get-post-put-patch-delete-和-options-方法","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用 GET, POST, PUT, PATCH, DELETE 和 OPTIONS 方法")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 禁用输出文本窗口颜色")]),t._v("\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// gin.DisableConsoleColor()")]),t._v("\n\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 创建 gin router 附带默认中间件:")]),t._v("\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// logger 和 recovery (crash-free) 中间件")]),t._v("\n\trouter "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("GET")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/someGet"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" getting"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("POST")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/somePost"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" posting"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("PUT")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/somePut"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" putting"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("DELETE")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/someDelete"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deleting"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("PATCH")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/somePatch"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" patching"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("HEAD")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/someHead"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" head"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("OPTIONS")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/someOptions"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 默认监听 :8080 除非 PORT 环境变量被指定")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token comment"}},[t._v('// router.Run(":3000") 监听3000 端口')]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"路径参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#路径参数","aria-hidden":"true"}},[t._v("#")]),t._v(" 路径参数")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\trouter "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 这个 handler 匹配 /user/john 但是不匹配 /user/ 和 /user")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("GET")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/user/:name"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tname "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Param")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"name"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("String")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StatusOK"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"Hello %s"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 然而, 这个会匹配 /user/john/ 和  /user/john/send")]),t._v("\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 如果没有其他路由匹配 /user/john, 它将重定向到 /user/john/")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("GET")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/user/:name/*action"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tname "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Param")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"name"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\taction "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Param")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"action"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tmessage "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" name "),n("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('" is "')]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" action\n\t\tc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("String")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StatusOK"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"querystring-参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#querystring-参数","aria-hidden":"true"}},[t._v("#")]),t._v(" Querystring 参数")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\trouter "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("GET")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/welcome"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tfirstname "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("DefaultQuery")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"firstname"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"Guest"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tlastname "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Query")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"lastname"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v('// c.Request.URL.Query().Get("lastname")的简写')]),t._v("\n\n\t\tc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("String")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StatusOK"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"Hello %s %s"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" firstname"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lastname"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"multipart-urlencoded-form"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#multipart-urlencoded-form","aria-hidden":"true"}},[t._v("#")]),t._v(" Multipart/Urlencoded Form")]),n("p",[t._v("表单提交")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\trouter "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("POST")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/form_post"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tmessage "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("PostForm")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"message"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tnick "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("DefaultPostForm")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"nick"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"anonymous"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t\tc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("JSON")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("200")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("H"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{attrs:{class:"token string"}},[t._v('"status"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  "),n("span",{attrs:{class:"token string"}},[t._v('"posted"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),n("span",{attrs:{class:"token string"}},[t._v('"message"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" message"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),n("span",{attrs:{class:"token string"}},[t._v('"nick"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("    nick"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"another-example-query-post-form"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#another-example-query-post-form","aria-hidden":"true"}},[t._v("#")]),t._v(" Another example: query + post form")]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("POST /post?id=1234&page=1 HTTP/1.1\nContent-Type: application/x-www-form-urlencoded\n\nname=manu&message=this_is_great\n")])])]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\trouter "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("POST")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/post"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\tid "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Query")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"id"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tpage "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("DefaultQuery")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"page"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"0"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tname "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("PostForm")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"name"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tmessage "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("PostForm")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"message"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t\tfmt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Printf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"id: %s; page: %s; name: %s; message: %s"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" page"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("id: 1234; page: 1; name: manu; message: this_is_great\n")])])]),n("h3",{attrs:{id:"上传文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#上传文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 上传文件")]),n("h4",{attrs:{id:"单文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#单文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 单文件")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\trouter "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 为 multipart forms 设置一个低内存占用限制 (默认为32 MiB)")]),t._v("\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// router.MaxMultipartMemory = 8 << 20  // 8 MiB")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("POST")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/upload"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 单 file")]),t._v("\n\t\tfile"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("FormFile")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"file"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tlog"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Println")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Filename"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 上传文件到路径")]),t._v("\n\t\t"),n("span",{attrs:{class:"token comment"}},[t._v("// c.SaveUploadedFile(file, dst)")]),t._v("\n\n\t\tc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("String")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StatusOK"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fmt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Sprintf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("\"'%s' uploaded!\"")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" file"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Filename"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("How to "),n("code",[t._v("curl")]),t._v(":")]),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X POST http://localhost:8080/upload \\\n  -F "),n("span",{attrs:{class:"token string"}},[t._v('"file=@/Users/appleboy/test.zip"')]),t._v(" \\\n  -H "),n("span",{attrs:{class:"token string"}},[t._v('"Content-Type: multipart/form-data"')]),t._v("\n")])])]),n("h4",{attrs:{id:"多文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#多文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 多文件")]),n("p",[t._v("See the detail "),n("a",{attrs:{href:"examples/upload-file/multiple"}},[t._v("example code")]),t._v(".")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\trouter "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("POST")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/upload"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{attrs:{class:"token comment"}},[t._v("// Multipart form")]),t._v("\n\t\tform"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("MultipartForm")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tfiles "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" form"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("File"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token string"}},[t._v('"upload[]"')]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n\t\t"),n("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("_")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" file "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("range")]),t._v(" files "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tlog"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Println")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Filename"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t\t\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 上传文件到路径")]),t._v("\n\t\t\t"),n("span",{attrs:{class:"token comment"}},[t._v("// c.SaveUploadedFile(file, dst)")]),t._v("\n\t\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\tc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("String")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StatusOK"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fmt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Sprintf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"%d files uploaded!"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("len")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("files"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("How to "),n("code",[t._v("curl")]),t._v(":")]),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X POST http://localhost:8080/upload \\\n  -F "),n("span",{attrs:{class:"token string"}},[t._v('"upload[]=@/Users/appleboy/test1.zip"')]),t._v(" \\\n  -F "),n("span",{attrs:{class:"token string"}},[t._v('"upload[]=@/Users/appleboy/test2.zip"')]),t._v(" \\\n  -H "),n("span",{attrs:{class:"token string"}},[t._v('"Content-Type: multipart/form-data"')]),t._v("\n")])])]),n("h3",{attrs:{id:"组织路由-routes"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#组织路由-routes","aria-hidden":"true"}},[t._v("#")]),t._v(" 组织路由 routes")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\trouter "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// Simple group: v1")]),t._v("\n\tv1 "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" router"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Group")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/v1"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tv1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("POST")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/login"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" loginEndpoint"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tv1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("POST")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/submit"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" submitEndpoint"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tv1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("POST")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/read"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" readEndpoint"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// Simple group: v2")]),t._v("\n\tv2 "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" router"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Group")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/v2"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("POST")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/login"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" loginEndpoint"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("POST")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/submit"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" submitEndpoint"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("POST")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/read"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" readEndpoint"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"blank-gin-不适用默认路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#blank-gin-不适用默认路由","aria-hidden":"true"}},[t._v("#")]),t._v(" Blank Gin 不适用默认路由")]),n("p",[t._v("使用")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[t._v("r "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("New")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("而不是")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// 默认会顺带 Logger 和 Recovery 这两个中间价")]),t._v("\nr "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h3",{attrs:{id:"使用-中间件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-中间件","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用 中间件")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 创建 router 默认不顺带任何中间件")]),t._v("\n\tr "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("New")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 全局中间件")]),t._v("\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// Logger 中间件默认写 log到 gin.DefaultWriter 及时你设置 with GIN_MODE=release.")]),t._v("\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 默认 gin.DefaultWriter = os.Stdout")]),t._v("\n\tr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Use")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Logger")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 一个可以从panic和599 错误中死灰复燃的中间件")]),t._v("\n\tr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Use")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Recovery")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 每个路由中间件 你可以随意串联多个中间件， 按顺序执行")]),t._v("\n\tr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("GET")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/benchmark"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("MyBenchLogger")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" benchEndpoint"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// Authorization 组")]),t._v("\n\t"),n("span",{attrs:{class:"token comment"}},[t._v('// authorized := r.Group("/", AuthRequired())')]),t._v("\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 等同于:")]),t._v("\n\tauthorized "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" r"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Group")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token comment"}},[t._v('// AuthRequired() 中间件只 "authorized" group生效.')]),t._v("\n\tauthorized"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Use")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token function"}},[t._v("AuthRequired")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tauthorized"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("POST")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/login"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" loginEndpoint"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tauthorized"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("POST")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/submit"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" submitEndpoint"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tauthorized"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("POST")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/read"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" readEndpoint"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t\t"),n("span",{attrs:{class:"token comment"}},[t._v("// nested group")]),t._v("\n\t\ttesting "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" authorized"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Group")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"testing"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\ttesting"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("GET")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/analytics"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" analyticsEndpoint"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\tr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"如何写入-log-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何写入-log-文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何写入 log 文件")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 写入 log 文件 可以禁用 console 颜色")]),t._v("\n    gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("DisableConsoleColor")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 输出log到文件.")]),t._v("\n    f"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" os"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Create")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"gin.log"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefaultWriter "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" io"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("MultiWriter")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 如果你需要写 log 文件 与此同时 console的话， 可以这样写")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// gin.DefaultWriter = io.MultiWriter(f, os.Stdout)")]),t._v("\n\n    router "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    router"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("GET")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/ping"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("String")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("200")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"pong"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    router"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"静态服务器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#静态服务器","aria-hidden":"true"}},[t._v("#")]),t._v(" 静态服务器")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\trouter "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Static")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/assets"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"./assets"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("StaticFS")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/more_static"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Dir")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"my_file_system"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("StaticFile")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/favicon.ico"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"./resources/favicon.ico"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),n("span",{attrs:{class:"token comment"}},[t._v("// Listen and serve on 0.0.0.0:8080")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"serving-data-from-reader"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#serving-data-from-reader","aria-hidden":"true"}},[t._v("#")]),t._v(" Serving data from reader")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\trouter "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("GET")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/someDataFromReader"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tresponse"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Get")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"https://raw.githubusercontent.com/gin-gonic/logo/master/color.png"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),n("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" response"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StatusCode "),n("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StatusOK "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Status")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StatusServiceUnavailable"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\t\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\treader "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" response"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Body\n\t\tcontentLength "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" response"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ContentLength\n\t\tcontentType "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" response"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Header"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Get")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"Content-Type"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t\textraHeaders "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("map")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{attrs:{class:"token string"}},[t._v('"Content-Disposition"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('`attachment; filename="gopher.png"`')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\tc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("DataFromReader")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StatusOK"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" contentLength"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" contentType"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reader"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" extraHeaders"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\trouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"重定向"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#重定向","aria-hidden":"true"}},[t._v("#")]),t._v(" 重定向")]),n("p",[t._v("同时支持内部 location 以及 外部 location 重定向")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[t._v("r"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("GET")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/test"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Redirect")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StatusMovedPermanently"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"http://www.google.com/"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("用 "),n("code",[t._v("HandleContext")]),t._v(" 触发路由重定向.")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[t._v("r"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("GET")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/test"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Request"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("URL"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Path "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"/test2"')]),t._v("\n    r"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("HandleContext")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("GET")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/test2"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("JSON")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("200")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("H"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token string"}},[t._v('"hello"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"world"')]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h3",{attrs:{id:"自定义中间件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义中间件","aria-hidden":"true"}},[t._v("#")]),t._v(" 自定义中间件")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("Logger")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HandlerFunc "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tt "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" time"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Now")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 设置 example 变量")]),t._v("\n\t\tc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Set")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"example"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"12345"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 请求前")]),t._v("\n\n\t\tc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Next")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 请求后")]),t._v("\n\t\tlatency "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" time"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Since")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tlog"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Print")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("latency"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 获取发送的状态")]),t._v("\n\t\tstatus "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Writer"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Status")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tlog"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Println")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tr "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("New")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Use")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token function"}},[t._v("Logger")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\tr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("GET")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/test"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\texample "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("MustGet")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"example"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t\t"),n("span",{attrs:{class:"token comment"}},[t._v('// it would print: "12345"')]),t._v("\n\t\tlog"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Println")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("example"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\tr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"在中间件使用-goroutines"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在中间件使用-goroutines","aria-hidden":"true"}},[t._v("#")]),t._v(" 在中间件使用 Goroutines")]),n("p",[t._v("当在一个中间件或者 router 中开启 Goroutine, 你不应该使用原始的 context, 你必须使用一份只读复制.")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tr "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\tr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("GET")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/long_async"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 创建一份副本")]),t._v("\n\t\tcCp "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Copy")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),n("span",{attrs:{class:"token keyword"}},[t._v("go")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\ttime"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Sleep")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("5")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" time"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Second"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t\t\t"),n("span",{attrs:{class:"token comment"}},[t._v("// 使用副本")]),t._v("\n\t\t\tlog"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Println")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"Done! in path "')]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" cCp"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Request"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("URL"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Path"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Run")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"自定义-http-配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义-http-配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 自定义 HTTP 配置")]),n("p",[t._v("Use "),n("code",[t._v("http.ListenAndServe()")]),t._v(" directly, like this:")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\trouter "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\thttp"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("ListenAndServe")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" router"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("or")]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("main")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\trouter "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" gin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Default")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\ts "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Server"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tAddr"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("           "),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tHandler"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("        router"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tReadTimeout"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("    "),n("span",{attrs:{class:"token number"}},[t._v("10")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" time"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Second"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tWriteTimeout"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("   "),n("span",{attrs:{class:"token number"}},[t._v("10")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" time"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Second"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tMaxHeaderBytes"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("20")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ts"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("ListenAndServe")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}],!1,null,null,null);s.default=o.exports}}]);