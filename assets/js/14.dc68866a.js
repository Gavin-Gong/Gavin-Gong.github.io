(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{170:function(t,e,a){"use strict";a.r(e);var s=a(0),r=Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),a("p",[t._v("包含 token 类型和加密算法")]),t._m(5),t._m(6),a("p",[t._v("包含一些声明其实就是附加数据存储, 我们可以选择往里面存储一些用户数据, 也包括一些保留字段和自定义字段")]),t._m(7),a("p",[t._v("一些常用字段")]),t._m(8),t._m(9),a("p",[t._v("密匙, 用来加密和解密 token")]),a("p",[t._v("有了以上三个, 我们就可以生成 token 了, 对 payload 和 header 进行 base64Url 进行编码, 然后拼接 secret, 最后再用 header 指定的加密算法进行加密处理")]),t._m(10),t._m(11),t._m(12),t._m(13),t._m(14),t._m(15),t._m(16),a("p",[a("a",{attrs:{href:"https://www.iana.org/assignments/jwt/jwt.xhtml",target:"_blank",rel:"noopener noreferrer"}},[t._v("声明保留字"),a("OutboundLink")],1),a("a",{attrs:{href:"https://jwt.io/introduction/",target:"_blank",rel:"noopener noreferrer"}},[t._v("JWT 规范"),a("OutboundLink")],1),a("a",{attrs:{href:"https://blog.csdn.net/wangshubo1989/article/details/74529333",target:"_blank",rel:"noopener noreferrer"}},[t._v("Go 实战--golang 中使用 JWT(JSON Web Token)"),a("OutboundLink")],1)])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"jwt-机制-go-实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jwt-机制-go-实践","aria-hidden":"true"}},[this._v("#")]),this._v(" jwt 机制 & go 实践")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("2018-05-24")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#结构","aria-hidden":"true"}},[this._v("#")]),this._v(" 结构")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("JWT")]),this._v("由三部分组成, 以点的形式分割\n"),e("code",[this._v("Header.Payload.Signature")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"header"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#header","aria-hidden":"true"}},[this._v("#")]),this._v(" header")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"alg"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"HS256"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"typ"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"JWT"')]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"payload-claim"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#payload-claim","aria-hidden":"true"}},[this._v("#")]),this._v(" payload(claim)")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"sub"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"1234567890"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"name"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"John Doe"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"iat"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1516239022")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("iss token 拥有者")]),e("li",[this._v("exp Expire 过期时间(Unix 时间戳)")]),e("li",[this._v("iat Issued At 创建时间(Unix)")]),e("li",[this._v("jti JWT Id")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"secret"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#secret","aria-hidden":"true"}},[this._v("#")]),this._v(" secret")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('HMACSHA256(\n  base64UrlEncode(header) + "." +\n  base64UrlEncode(payload),\n  secret)\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"jwt-使用流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jwt-使用流程","aria-hidden":"true"}},[this._v("#")]),this._v(" JWT 使用流程")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("JWT 真实场景交互流程如图\n"),a("img",{attrs:{src:"http://opazkqh2d.bkt.clouddn.com/18-5-25/15302651.jpg",alt:"JWT CS 交互流程",title:"JWT Token"}}),t._v("\n在客户端获取到"),a("code",[t._v("token")]),t._v("后需要将"),a("code",[t._v("token")]),t._v("保存起来(例如 "),a("code",[t._v("localStorage")]),t._v("), 然后在需要的进行授权的请求的请求头中添加")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("Authorization: Bearer <token>\n")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("后端读取到 请求头中的"),a("code",[t._v("Authorization")]),t._v(", 取出"),a("code",[t._v("token")]),t._v("进行解密, 验证提取"),a("code",[t._v("token")]),t._v("中存储的信息. "),a("code",[t._v("JWT")]),t._v("是一种无状态的授权协议, 因此我们不需要通过数据库来维护一个登陆态, 所有和登陆相关的信息都加密在"),a("code",[t._v("token")]),t._v("里面, 我们只需要在服务器保存一个"),a("code",[t._v("secret")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"jwt-go"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jwt-go","aria-hidden":"true"}},[this._v("#")]),this._v(" jwt-go")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"参考链接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考链接","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考链接")])}],!1,null,null,null);e.default=r.exports}}]);